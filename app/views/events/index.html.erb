<% if @title == "Product Order" %>
	<%= form_tag(po_events_path, method: :get) do %>
		<%= text_field_tag :Invoice, @inv_num, placeholder: "Invoice #"  %>
		<%= text_field_tag :Supplier, @sup_name, placeholder: "Supplier Name"  %>
		<%= select_tag :event_type, options_for_select(["All Shipments", "Received", "In Transit"], @event_type) %>
		<%= submit_tag "Submit", class: "btn btn-primary" %>
	<% end %>
	<%= link_to "New Product Order", new_po_events_path %>
<% elsif @title == "Inventory" %>
	<%= link_to "New Inventory Count", new_inventory_events_path %>
<% end %>
<div class="pagination">
     <%= will_paginate @events, :container => false %>
</div>
<table class="table">
<tr>
	<td>Modify Record</td>
	<td>Date Created <%= render "sort_buttons", name: "DC", inv_num: @inv_num, sup_name: @sup_name, event_type: @event_type %></td>
<% if @title == "Product Order" %>
	<td>Invoice #<br><%= render "sort_buttons", name: "INV", inv_num: @inv_num, sup_name: @sup_name, event_type: @event_type  %></td>
	<td>Supplier<br><%= render "sort_buttons", name: "SUP", inv_num: @inv_num, sup_name: @sup_name, event_type: @event_type  %></td>
	<td>Expected Delivery<br><%= render "sort_buttons", name: "DE", inv_num: @inv_num, sup_name: @sup_name, event_type: @event_type  %></td>
	<td>Actual Delivery<br><%= render "sort_buttons", name: "DA", inv_num: @inv_num, sup_name: @sup_name, event_type: @event_type  %></td>
<% end %>
	<td>Products</td>
</tr>
<% @events.each do |event| %>
<tr>
	<td><%= link_to 'Edit', edit_event_path(event) %> | <%= link_to "Delete", event, :method => :delete, :confirm => "You sure?", :title => "Delete #{event.event_type}" %> 
	<% if !event.received && @title != "Inventory" %>
 		| <%= link_to 'Receive Today', receive_po_today_event_path(event) %> 
 	<% end %>        
  </td>
  <td><%= event.date %></td>
<% if @title == "Product Order" %>
	<td><%= event.invoice %></td>
	<td><%= event.supplier %></td>
	<td><%= event.expected_date %></td>
	<td><%= event.received_date if event.received %></td>
<% end %>
	<td>
		<ul>
		<% event.product_counts.sort_by(&:product_name).each do |pc| %>
			<% if pc.count && pc.count > 0 %>
				<li><%= link_to pc.product.name, product_path(pc.product) %>: <%= pc.count.round %> 
				<% if pc.is_box %>
					boxes
				<% else %>
					pieces
				<% end %>
				</li>
			<% end %>
		<% end %>
		</ul>
	</td>
</tr>
<% end %>
</table>
<div class="pagination">
     <%= will_paginate @events, :container => false %>
</div>
